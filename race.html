<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asfaltƒ±n Ruhu - Racing Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial Black', sans-serif;
            overflow: hidden;
            background: #000;
        }

        #gameCanvas {
            display: block;
            background: #1a1a1a;
        }

        /* HUD Styles */
        .hud {
            position: absolute;
            color: white;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            z-index: 10;
        }

        #speedometer {
            bottom: 30px;
            left: 30px;
            font-size: 48px;
            font-family: 'Arial Black';
        }

        #speedLabel {
            bottom: 20px;
            left: 35px;
            font-size: 16px;
            color: #00ff00;
        }

        #nitroBar {
            bottom: 100px;
            left: 30px;
            width: 200px;
            height: 30px;
            background: rgba(0, 0, 0, 0.7);
            border: 3px solid #00ff00;
            border-radius: 5px;
            overflow: hidden;
        }

        #nitroFill {
            height: 100%;
            background: linear-gradient(90deg, #00ff00, #00ffff);
            width: 100%;
            transition: width 0.1s;
            box-shadow: 0 0 20px #00ff00;
        }

        #nitroLabel {
            bottom: 135px;
            left: 30px;
            font-size: 14px;
            color: #00ff00;
        }

        #position {
            top: 30px;
            right: 30px;
            font-size: 36px;
        }

        #lapCounter {
            top: 80px;
            right: 30px;
            font-size: 24px;
        }

        #timer {
            top: 120px;
            right: 30px;
            font-size: 20px;
            color: #ffff00;
        }

        /* Start Screen */
        #startScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }

        .game-title {
            font-size: 5rem;
            background: linear-gradient(45deg, #ff6b6b, #ffd93d, #6bcf7f, #4d96ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 2rem;
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.5); }
        }

        .subtitle {
            font-size: 1.5rem;
            color: #ffd93d;
            margin-bottom: 3rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 20px 50px;
            font-size: 1.5rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.4);
            text-transform: uppercase;
        }

        .btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 40px rgba(255, 107, 107, 0.6);
        }

        .controls {
            margin-top: 3rem;
            color: white;
            font-size: 1.2rem;
            text-align: center;
        }

        .control-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 1rem;
            max-width: 600px;
        }

        .control-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .key {
            display: inline-block;
            background: #ff6b6b;
            padding: 5px 15px;
            border-radius: 5px;
            margin-right: 10px;
            font-weight: bold;
        }

        #gameOverScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }

        .final-stats {
            color: white;
            font-size: 2rem;
            margin: 1rem;
            text-align: center;
        }

        .stat-highlight {
            color: #ffd93d;
            font-size: 3rem;
        }

        #driftIndicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4rem;
            color: #ff6b6b;
            font-weight: bold;
            display: none;
            text-shadow: 0 0 20px #ff6b6b;
            animation: drift-pulse 0.5s ease-in-out infinite;
        }

        @keyframes drift-pulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.2); }
        }

        #nitroEffect {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            display: none;
        }

        .speed-lines {
            position: absolute;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                90deg,
                transparent,
                transparent 10px,
                rgba(0, 255, 255, 0.3) 10px,
                rgba(0, 255, 255, 0.3) 12px
            );
            animation: speed-lines 0.1s linear infinite;
        }

        @keyframes speed-lines {
            0% { transform: translateX(0); }
            100% { transform: translateX(-20px); }
        }
    </style>
</head>
<body>
    <!-- HUD Elements -->
    <div id="speedometer" class="hud">0</div>
    <div id="speedLabel" class="hud">KM/H</div>
    <div id="nitroBar" class="hud">
        <div id="nitroFill"></div>
    </div>
    <div id="nitroLabel" class="hud">NITRO</div>
    <div id="position" class="hud">1<sup>st</sup></div>
    <div id="lapCounter" class="hud">Tur: 1/3</div>
    <div id="timer" class="hud">00:00.000</div>
    <div id="driftIndicator">DRIFT!</div>
    <div id="nitroEffect">
        <div class="speed-lines"></div>
    </div>

    <!-- Start Screen -->
    <div id="startScreen">
        <h1 class="game-title">üèéÔ∏è ASFALTIN RUHU üèéÔ∏è</h1>
        <p class="subtitle">Hƒ±zƒ±n Limitini A≈ü!</p>
        <button class="btn" onclick="startRace()">Yarƒ±≈üa Ba≈üla</button>
        <button class="btn" onclick="window.location.href='index.html'">Ana Men√º</button>
        <div class="controls">
            <h3>Kontroller</h3>
            <div class="control-grid">
                <div class="control-item">
                    <span class="key">W / ‚Üë</span> Hƒ±zlan
                </div>
                <div class="control-item">
                    <span class="key">S / ‚Üì</span> Fren
                </div>
                <div class="control-item">
                    <span class="key">A / ‚Üê</span> Sola D√∂n
                </div>
                <div class="control-item">
                    <span class="key">D / ‚Üí</span> Saƒüa D√∂n
                </div>
                <div class="control-item">
                    <span class="key">SPACE</span> Drift
                </div>
                <div class="control-item">
                    <span class="key">SHIFT</span> Nitro
                </div>
            </div>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="gameOverScreen">
        <h1 class="game-title">Yarƒ±≈ü Bitti!</h1>
        <div class="final-stats">
            Pozisyon: <span class="stat-highlight" id="finalPosition">1</span>
        </div>
        <div class="final-stats">
            S√ºre: <span class="stat-highlight" id="finalTime">00:00.000</span>
        </div>
        <div class="final-stats">
            En Y√ºksek Hƒ±z: <span class="stat-highlight" id="maxSpeed">0</span> km/h
        </div>
        <div class="final-stats">
            Toplam Drift Puanƒ±: <span class="stat-highlight" id="driftScore">0</span>
        </div>
        <button class="btn" onclick="restartRace()">Tekrar Yarƒ±≈ü</button>
        <button class="btn" onclick="backToMenu()">Ana Men√º</button>
    </div>

    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let gameState = 'menu';
        let raceStartTime = 0;
        let currentLap = 1;
        let totalLaps = 3;
        let maxSpeedAchieved = 0;
        let totalDriftScore = 0;

        class Car {
            constructor(x, y, isPlayer = false) {
                this.x = x;
                this.y = y;
                this.width = 30;
                this.height = 50;
                this.angle = 0;
                this.speed = 0;
                this.maxSpeed = isPlayer ? 300 : 250;
                this.acceleration = isPlayer ? 0.5 : 0.4;
                this.friction = 0.95;
                this.turnSpeed = 0.05;
                this.drifting = false;
                this.driftAngle = 0;
                this.nitro = 100;
                this.nitroActive = false;
                this.isPlayer = isPlayer;
                this.color = isPlayer ? '#ff6b6b' : this.randomColor();
                this.trail = [];
                this.driftScore = 0;
                this.lapCount = 0;
            }

            randomColor() {
                const colors = ['#4d96ff', '#6bcf7f', '#ffd93d', '#ff6b9d', '#c77dff'];
                return colors[Math.floor(Math.random() * colors.length)];
            }

            update(keys) {
                if (!this.isPlayer) {
                    this.aiControl();
                    return;
                }

                if (keys['w'] || keys['ArrowUp']) {
                    this.speed += this.acceleration;
                }

                if (keys['s'] || keys['ArrowDown']) {
                    this.speed -= this.acceleration * 1.5;
                }

                if (keys[' '] && Math.abs(this.speed) > 50) {
                    this.drifting = true;
                    document.getElementById('driftIndicator').style.display = 'block';
                    this.nitro = Math.min(100, this.nitro + 0.5);
                    this.driftScore += Math.abs(this.speed) * 0.1;
                    totalDriftScore += Math.abs(this.speed) * 0.1;
                    this.friction = 0.98;
                } else {
                    this.drifting = false;
                    document.getElementById('driftIndicator').style.display = 'none';
                    this.friction = 0.95;
                    this.driftAngle *= 0.9;
                }

                if (keys['a'] || keys['ArrowLeft']) {
                    if (Math.abs(this.speed) > 1) {
                        this.angle -= this.turnSpeed * (Math.abs(this.speed) / 50);
                        if (this.drifting) {
                            this.driftAngle = -0.3;
                        }
                    }
                }

                if (keys['d'] || keys['ArrowRight']) {
                    if (Math.abs(this.speed) > 1) {
                        this.angle += this.turnSpeed * (Math.abs(this.speed) / 50);
                        if (this.drifting) {
                            this.driftAngle = 0.3;
                        }
                    }
                }

                if (keys['Shift'] && this.nitro > 0) {
                    this.nitroActive = true;
                    this.nitro -= 1;
                    this.speed += 2;
                    document.getElementById('nitroEffect').style.display = 'block';
                } else {
                    this.nitroActive = false;
                    document.getElementById('nitroEffect').style.display = 'none';
                }

                if (this.nitroActive) {
                    this.speed = Math.min(this.speed, this.maxSpeed * 1.5);
                } else {
                    this.speed = Math.min(this.speed, this.maxSpeed);
                }
                this.speed = Math.max(this.speed, -this.maxSpeed / 2);

                this.speed *= this.friction;

                const effectiveAngle = this.angle + this.driftAngle;
                this.x += Math.sin(this.angle) * this.speed * 0.1;
                this.y -= Math.cos(this.angle) * this.speed * 0.1;

                if (this.drifting && Math.abs(this.speed) > 50) {
                    this.trail.push({
                        x: this.x,
                        y: this.y,
                        angle: this.angle,
                        life: 30
                    });
                }

                this.trail = this.trail.filter(t => t.life-- > 0);

                if (this.isPlayer) {
                    const displaySpeed = Math.abs(this.speed);
                    document.getElementById('speedometer').textContent = Math.floor(displaySpeed);
                    document.getElementById('nitroFill').style.width = this.nitro + '%';

                    if (displaySpeed > maxSpeedAchieved) {
                        maxSpeedAchieved = displaySpeed;
                    }
                }

                const trackBounds = 400;
                if (Math.abs(this.x) > trackBounds) {
                    this.x = Math.sign(this.x) * trackBounds;
                    this.speed *= 0.5;
                }
                if (Math.abs(this.y) > trackBounds) {
                    this.y = Math.sign(this.y) * trackBounds;
                    this.speed *= 0.5;
                }
            }

            aiControl() {
                const targetX = Math.sin(Date.now() * 0.001) * 200;
                const targetY = Math.cos(Date.now() * 0.001) * 200;

                const dx = targetX - this.x;
                const dy = targetY - this.y;
                const targetAngle = Math.atan2(dx, -dy);

                let angleDiff = targetAngle - this.angle;
                while (angleDiff > Math.PI) angleDiff -= Math.PI * 2;
                while (angleDiff < -Math.PI) angleDiff += Math.PI * 2;

                this.angle += angleDiff * 0.05;
                this.speed += this.acceleration * 0.8;
                this.speed = Math.min(this.speed, this.maxSpeed);
                this.speed *= this.friction;

                this.x += Math.sin(this.angle) * this.speed * 0.1;
                this.y -= Math.cos(this.angle) * this.speed * 0.1;
            }

            draw(camera) {
                ctx.save();
                ctx.translate(canvas.width / 2, canvas.height / 2);

                this.trail.forEach(t => {
                    ctx.globalAlpha = t.life / 30;
                    ctx.fillStyle = '#333';
                    ctx.fillRect(
                        (t.x - camera.x) - 5,
                        (t.y - camera.y) - 5,
                        10, 10
                    );
                });
                ctx.globalAlpha = 1;

                ctx.translate(
                    this.x - camera.x,
                    this.y - camera.y
                );
                ctx.rotate(this.angle);

                ctx.fillStyle = this.color;
                ctx.fillRect(-this.width / 2, -this.height / 2, this.width, this.height);

                ctx.fillStyle = '#333';
                ctx.fillRect(-this.width / 2 + 5, -this.height / 2 + 10, this.width - 10, 15);

                if (this.nitroActive && this.isPlayer) {
                    ctx.fillStyle = '#00ffff';
                    ctx.shadowBlur = 20;
                    ctx.shadowColor = '#00ffff';
                    ctx.fillRect(-this.width / 2, this.height / 2, this.width, 5);
                    ctx.shadowBlur = 0;
                }

                ctx.fillStyle = '#222';
                ctx.fillRect(-this.width / 2 - 3, -this.height / 2 + 5, 5, 12);
                ctx.fillRect(this.width / 2 - 2, -this.height / 2 + 5, 5, 12);
                ctx.fillRect(-this.width / 2 - 3, this.height / 2 - 17, 5, 12);
                ctx.fillRect(this.width / 2 - 2, this.height / 2 - 17, 5, 12);

                ctx.restore();
            }
        }

        const camera = {
            x: 0,
            y: 0,
            follow(target) {
                this.x += (target.x - this.x) * 0.1;
                this.y += (target.y - this.y) * 0.1;
            }
        };

        const keys = {};
        document.addEventListener('keydown', (e) => {
            keys[e.key.toLowerCase()] = true;
            keys[e.key] = true;
        });
        document.addEventListener('keyup', (e) => {
            keys[e.key.toLowerCase()] = false;
            keys[e.key] = false;
        });

        let playerCar;
        let aiCars = [];

        function startRace() {
            document.getElementById('startScreen').style.display = 'none';
            gameState = 'racing';
            raceStartTime = Date.now();
            currentLap = 1;
            maxSpeedAchieved = 0;
            totalDriftScore = 0;

            playerCar = new Car(0, 0, true);
            aiCars = [];
            for (let i = 0; i < 5; i++) {
                aiCars.push(new Car(-50 + i * 30, 50 + i * 30, false));
            }

            gameLoop();
        }

        function restartRace() {
            document.getElementById('gameOverScreen').style.display = 'none';
            startRace();
        }

        function backToMenu() {
            document.getElementById('gameOverScreen').style.display = 'none';
            document.getElementById('startScreen').style.display = 'flex';
            gameState = 'menu';
        }

        function drawTrack() {
            ctx.save();
            ctx.translate(canvas.width / 2, canvas.height / 2);
            ctx.translate(-camera.x, -camera.y);

            ctx.fillStyle = '#2a2a2a';
            ctx.fillRect(-2000, -2000, 4000, 4000);

            ctx.strokeStyle = '#3a3a3a';
            ctx.lineWidth = 2;
            for (let i = -2000; i < 2000; i += 100) {
                ctx.beginPath();
                ctx.moveTo(i, -2000);
                ctx.lineTo(i, 2000);
                ctx.stroke();

                ctx.beginPath();
                ctx.moveTo(-2000, i);
                ctx.lineTo(2000, i);
                ctx.stroke();
            }

            ctx.strokeStyle = '#555';
            ctx.lineWidth = 200;
            ctx.beginPath();
            ctx.ellipse(0, 0, 300, 300, 0, 0, Math.PI * 2);
            ctx.stroke();

            ctx.strokeStyle = '#ff0000';
            ctx.lineWidth = 5;
            ctx.beginPath();
            ctx.ellipse(0, 0, 200, 200, 0, 0, Math.PI * 2);
            ctx.stroke();

            ctx.strokeStyle = '#ffffff';
            ctx.beginPath();
            ctx.ellipse(0, 0, 400, 400, 0, 0, Math.PI * 2);
            ctx.stroke();

            ctx.fillStyle = '#ffffff';
            for (let i = 0; i < 10; i++) {
                if (i % 2 === 0) {
                    ctx.fillRect(-50 + i * 10, -300, 10, 40);
                }
            }

            ctx.restore();
        }

        function gameLoop() {
            if (gameState !== 'racing') return;

            ctx.fillStyle = '#1a1a1a';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            drawTrack();

            playerCar.update(keys);
            camera.follow(playerCar);

            aiCars.forEach(car => {
                car.update({});
                car.draw(camera);
            });

            playerCar.draw(camera);

            const elapsedTime = Date.now() - raceStartTime;
            const minutes = Math.floor(elapsedTime / 60000);
            const seconds = Math.floor((elapsedTime % 60000) / 1000);
            const milliseconds = Math.floor((elapsedTime % 1000));
            document.getElementById('timer').textContent =
                `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}.${String(milliseconds).padStart(3, '0')}`;

            requestAnimationFrame(gameLoop);
        }

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html> 